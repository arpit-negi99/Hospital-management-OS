<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital OS - Patient Management System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { background: white; border-radius: 10px; padding: 30px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center; }
        .header h1 { color: #667eea; font-size: 2.5em; margin-bottom: 10px; }
        .content { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .doctors-section, .form-section { background: white; border-radius: 10px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .doctors-section h2, .form-section h2 { color: #667eea; margin-bottom: 20px; font-size: 1.8em; }
        .doctors-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .doctor-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px; text-align: center; cursor: pointer; text-decoration: none; display: block; transition: transform 0.3s; }
        .doctor-card:hover { transform: translateY(-5px); }
        .doctor-card h3 { font-size: 1em; margin-bottom: 5px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .form-row.full { grid-template-columns: 1fr; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { color: #333; font-weight: 600; margin-bottom: 8px; }
        .form-group input, .form-group select { padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 6px; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #667eea; }
        .buttons { display: flex; gap: 10px; margin-top: 25px; }
        .btn { flex: 1; padding: 14px 20px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-secondary { background: #f0f0f0; color: #333; }
        .btn-tertiary { background: #ff6b6b; color: white; }
        .message { padding: 15px; border-radius: 6px; margin-top: 15px; display: none; }
        .message.success { background: #d4edda; color: #155724; display: block; }
        .message.error { background: #f8d7da; color: #721c24; display: block; }
        .stats-section { background: white; border-radius: 10px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); grid-column: 1 / -1; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 8px; text-align: center; }
        .stat-card h4 { font-size: 2.5em; margin-bottom: 10px; }
        @media (max-width: 1024px) { .content { grid-template-columns: 1fr; } .stats-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header"><h1>üè• Hospital OS</h1><p>Patient Management & Resource Allocation System</p></div>
        <div class="content">
            <div class="doctors-section">
                <h2>üë®‚Äç‚öïÔ∏è Doctor Dashboards</h2>
                <div class="doctors-grid">
                    <a href="/doctor/1" class="doctor-card"><h3>Dr. Sarah Johnson</h3><p>Emergency Medicine</p></a>
                    <a href="/doctor/2" class="doctor-card"><h3>Dr. Michael Chen</h3><p>Internal Medicine</p></a>
                    <a href="/doctor/3" class="doctor-card"><h3>Dr. Emily Rodriguez</h3><p>Surgery</p></a>
                </div>
            </div>
            <div class="form-section">
                <h2>‚ûï Register Patient</h2>
                <form id="patientForm">
                    <div class="form-row"><div class="form-group"><label>Name *</label><input type="text" name="name" required></div><div class="form-group"><label>Doctor *</label><select name="doctorChoice" required><option value="">Select</option><option value="1">Dr. Sarah</option><option value="2">Dr. Michael</option><option value="3">Dr. Emily</option></select></div></div>
                    <div class="form-row"><div class="form-group"><label>HR (40-200) *</label><input type="number" name="heartRate" min="40" max="200" required></div><div class="form-group"><label>O2 (70-100) *</label><input type="number" name="oxygenSat" min="70" max="100" required></div></div>
                    <div class="form-row"><div class="form-group"><label>Temp (95-106) *</label><input type="number" name="tempF" min="95" max="106" step="0.1" required></div><div class="form-group"><label>BP (60-200) *</label><input type="number" name="systolicBP" min="60" max="200" required></div></div>
                    <div class="form-row"><div class="form-group"><label>RR (8-40) *</label><input type="number" name="respRate" min="8" max="40" required></div><div class="form-group"><label>O2 Scale</label><select name="o2Scale"><option value="0">Room Air</option><option value="1">Nasal</option><option value="2">Mask</option></select></div></div>
                    <div id="message" class="message"></div>
                    <div class="buttons"><button type="submit" class="btn btn-primary">Register</button><button type="button" onclick="loadDemo()" class="btn btn-secondary">Demo</button><button type="button" onclick="resetSystem()" class="btn btn-tertiary">Reset</button></div>
                </form>
            </div>
        </div>
        <div class="stats-section">
            <h2>üìä Statistics</h2>
            <div class="stats-grid"><div class="stat-card"><h4 id="totalStats">0</h4><p>Total</p></div><div class="stat-card"><h4 id="waitingStats">0</h4><p>Waiting</p></div><div class="stat-card"><h4 id="treatingStats">0</h4><p>Treating</p></div><div class="stat-card"><h4 id="completedStats">0</h4><p>Completed</p></div></div>
        </div>
    </div>
    <script>
        document.getElementById('patientForm').addEventListener('submit', function(e) { e.preventDefault(); const data = Object.fromEntries(new FormData(this)); fetch('/api/register-patient', {method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data)}).then(r => r.json()).then(data => { const msg = document.getElementById('message'); if (data.success) { msg.textContent = `‚úÖ ${data.patient.name} registered as ${data.patient.priority}!`; msg.className = 'message success'; document.getElementById('patientForm').reset(); setTimeout(() => updateStats(), 500); } else { msg.textContent = `‚ùå ${data.error}`; msg.className = 'message error'; } }); });
        function loadDemo() { fetch('/api/demo').then(r => r.json()).then(data => { const msg = document.getElementById('message'); msg.textContent = data.success ? '‚úÖ Demo loaded!' : '‚ùå Error'; msg.className = 'message ' + (data.success ? 'success' : 'error'); setTimeout(() => updateStats(), 500); }); }
        function resetSystem() { if (confirm('Reset?')) { fetch('/api/reset', {method: 'POST'}).then(r => r.json()).then(() => { document.getElementById('message').textContent = '‚úÖ Reset!'; document.getElementById('message').className = 'message success'; updateStats(); }); } }
        function updateStats() { fetch('/api/schedule').then(r => r.json()).then(data => { if (data.success) { document.getElementById('totalStats').textContent = data.overall_stats.total_in_system; document.getElementById('waitingStats').textContent = data.overall_stats.total_waiting; document.getElementById('treatingStats').textContent = data.overall_stats.total_treating; document.getElementById('completedStats').textContent = data.overall_stats.total_completed; } }); }
        updateStats();
        setInterval(updateStats, 3000);
    </script>
</body>
</html>
