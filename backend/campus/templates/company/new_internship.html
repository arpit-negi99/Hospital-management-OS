{% extends 'base.html' %}
{% block title %}Post Internship{% endblock %}
{% block content %}
<h3 class="mb-3">Post a new internship</h3>
<form method="post">
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input name="title" class="form-control" required />
  </div>
  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea name="description" class="form-control" rows="5" required></textarea>
  </div>
  <div class="mb-3">
    <label class="form-label">Duration (months)</label>
    <input type="number" min="1" name="duration_months" class="form-control" required />
  </div>
  <div class="mb-3">
    <label class="form-label">Required Skills</label>
    <div>
      {% for s in all_skills %}
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="skill{{ s.id }}" value="{{ s.id }}" onchange="updateSkills()">
          <label class="form-check-label" for="skill{{ s.id }}">{{ s.name }}</label>
        </div>
      {% endfor %}
    </div>
    <input type="hidden" name="skill_ids" id="skillsField">
  </div>
  <button class="btn btn-primary">Post</button>
</form>
{% endblock %}
{% block scripts %}
<script>
  function updateSkills() {
    const ids = Array.from(document.querySelectorAll('input[type=checkbox][id^=skill]:checked')).map(el => el.value);
    document.getElementById('skillsField').value = ids.join(',');
  }
  updateSkills();
</script>
{% endblock %}
